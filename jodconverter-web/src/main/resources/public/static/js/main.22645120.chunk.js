(this["webpackJsonpfile-view"]=this["webpackJsonpfile-view"]||[]).push([[0],{141:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},219:function(e,t,n){},220:function(e,t,n){},221:function(e,t,n){"use strict";n.r(t);var r=n(5),a=n(0),c=n.n(a),i=n(25),s=n.n(i),o=(n(141),n(142),n(11)),l=n(12),p=n(15),u=n(16),j=(n(143),n(1)),h=n(133),f=n(52),b=n(224),d=n(223),O=(n(144),n(226)),v=n(34),x=n(24),y=n.n(x),m=n(33),g=new Headers;g.append("content-type","application/json");var k=function(){var e=Object(m.a)(y.a.mark((function e(t){var n,r=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,fetch(t,n);case 3:return e.abrupt("return",e.sent.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return k("/list",(t={action:"list",path:e},{method:"POST",body:JSON.stringify(t),headers:g,mode:"cors"}));var t},F="GET_FILE_LIST",C="OPEN_FOLDER",N="BACK",S=n(101);function A(){this.node=[]}A.prototype={join:function(e){e=e.replace("/",""),this.node.push(e)},back:function(){this.node.pop()},toString:function(){if(1===this.node.length)return"/"+this.node[0];var e="";return this.node.forEach((function(t){return e+="/"+t})),e}},A.fromString=function(e){var t,n=e.split("/"),r=[],a=Object(S.a)(n);try{for(a.s();!(t=a.n()).done;){var c=t.value;r.push(c)}}catch(s){a.e(s)}finally{a.f()}var i=new A;return i.node=r,i},A.back=function(e){var t=e.lastIndexOf("/");return 0===t?"":e=e.substr(0,t)};var L=function(e){for(var t,n=e.path,r=e.result,a=[],c=[],i=0,s=0;s<r.length;s++){var o=r[s],l=o.name,p=o.type;c[s]={title:l,type:"dir"===p?p:(t=l,t.substr(t.lastIndexOf(".")+1))},"dir"===p&&(a[i++]={title:l,key:"".concat(n,"/").concat(l),children:[{title:""}]})}return{type:F,data:{path:n,fileTree:a,files:c}}},T=function(e){return{type:C,data:e}},E=function(e){return function(){var t=Object(m.a)(y.a.mark((function t(n){var r,a;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w(e);case 2:r=t.sent,a=r.result,n(L({path:e,result:a}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},B={name:"file",action:"/fileUpload",headers:{authorization:"authorization-text"},onChange:function(e){"uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status?h.b.success("".concat(e.file.name," \u4e0a\u4f20\u6210\u529f")):"error"===e.file.status&&h.b.error("".concat(e.file.name," \u4e0a\u4f20\u5931\u8d25."))}},D=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1},e.handleBack=function(){var t=e.props.path;e.props.backAsync(t)},e.handleUpload=function(){e.setState({showModal:!0})},e.handleCancel=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"Navbar",children:[Object(r.jsxs)("div",{className:"left",children:[Object(r.jsx)("div",{children:Object(r.jsx)(f.a,{primary:!0,onClick:this.handleBack,children:"Back"})}),Object(r.jsx)("div",{children:this.props.path.length>0?this.props.path:"/"})]}),Object(r.jsx)("div",{className:"right",children:Object(r.jsx)(f.a,{onClick:this.handleUpload,children:"\u4e0a\u4f20\u6587\u4ef6"})}),Object(r.jsx)(b.a,{visible:this.state.showModal,onCancel:this.handleCancel,footer:null,children:Object(r.jsx)(d.a,Object(j.a)(Object(j.a)({},B),{},{children:Object(r.jsx)(f.a,{icon:Object(r.jsx)(O.a,{}),children:"\u70b9\u51fb\u4e0a\u4f20"})}))})]})}}]),n}(a.Component);D=Object(v.b)((function(e){return{path:e.Explorer.path}}),{backAsync:function(e){return function(){var t=Object(m.a)(y.a.mark((function t(n){var r,a,c;return y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=A.back(e),t.next=3,w(r);case 3:a=t.sent,c=a.result,n(L({path:r,result:c}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},getFileListAsync:E})(D);var M=function(e){return Object(r.jsxs)("div",{className:"Body",children:[Object(r.jsx)("div",{className:"file-directory box",children:e.left}),Object(r.jsx)("div",{className:"file-list box",children:e.right})]})},I=n(225);var P=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleSelect=function(t){var n=t[0];console.log(n),e.props.openFolder(n),e.props.getFileListAsync(n)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.getFileListAsync(this.props.path)}},{key:"render",value:function(){return Object(r.jsx)("div",{className:"FileDirectory",children:Object(r.jsx)(I.a,{treeData:this.props.fileTree,onSelect:this.handleSelect})})}}]),n}(c.a.Component);P=Object(v.b)((function(e){var t=e.Explorer,n=t.fileTree,r=t.path;return{fileTree:n,path:r=r.toString()}}),{getFileListAsync:E,openFolder:T})(P);var z=n(227),J=n(228),U=n(229),_=n(230),R=n(231),G=n(232),H=n(233),K=n(234),W=n(235),q=n(236),Q=n(237),V=n(238),X=(n(219),"http://localhost:8012/preview?url="),Y={file:Object(r.jsx)(z.a,{}),dir:Object(r.jsx)(J.a,{}),gif:Object(r.jsx)(U.a,{}),jpg:Object(r.jsx)(_.a,{}),png:Object(r.jsx)(_.a,{}),jpeg:Object(r.jsx)(_.a,{}),md:Object(r.jsx)(R.a,{}),ppt:Object(r.jsx)(G.a,{}),pptx:Object(r.jsx)(G.a,{}),txt:Object(r.jsx)(H.a,{}),pdf:Object(r.jsx)(K.a,{}),xls:Object(r.jsx)(W.a,{}),xlsx:Object(r.jsx)(W.a,{}),zip:Object(r.jsx)(q.a,{}),rar:Object(r.jsx)(q.a,{}),doc:Object(r.jsx)(Q.a,{}),docx:Object(r.jsx)(Q.a,{}),unknown:Object(r.jsx)(V.a,{})},Z=function(e){var t=e.type;return Y.hasOwnProperty(t)?Y[t]:Y.file},$=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(o.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){if("dir"===e.props.type){var t=e.props.path+"/"+e.props.name;e.props.openFolder(t),e.props.getFileListAsync(t)}else{var n=e.props.path+"/"+e.props.name;window.open("".concat(X).concat(n))}},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"File",onDoubleClick:this.handleClick,children:[Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)(Z,{type:this.props.type})}),Object(r.jsx)("p",{className:"file-name",children:this.props.name})]})}}]),n}(a.Component);$=Object(v.b)((function(e){return{path:e.Explorer.path}}),{getFileListAsync:E,openFolder:T})($);n(220);var ee=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsx)("div",{className:"FileList",children:this.props.files.map((function(e,t){return Object(r.jsx)($,{name:e.title,type:e.type},t)}))})}}]),n}(a.Component);ee=Object(v.b)((function(e){return{files:e.Explorer.files}}))(ee);var te=function(e){Object(p.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(D,{}),Object(r.jsx)(M,{left:Object(r.jsx)(P,{}),right:Object(r.jsx)(ee,{})})]})}}]),n}(c.a.Component),ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,239)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))},re=n(55),ae=n(126),ce={fileTree:[],files:[],path:""};var ie=n(127),se=Object(re.createStore)(Object(re.combineReducers)({Explorer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:var n=t.data,r=n.fileTree,a=n.files,c=n.path;return Object(j.a)(Object(j.a)({},e),{},{fileTree:r,files:a,path:c});case C:return Object(j.a)(Object(j.a)({},e),{},{path:t.data});case N:var i=A.back(e.path);return Object(j.a)(Object(j.a)({},e),{},{path:i});default:return e}}}),Object(ae.composeWithDevTools)(Object(re.applyMiddleware)(ie.a)));s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(v.a,{store:se,children:Object(r.jsx)(te,{})})}),document.getElementById("root")),ne()}},[[221,1,2]]]);
//# sourceMappingURL=main.22645120.chunk.js.map